"use strict";var levels=[{id:1,name:"Preescolar",grades:[{id:1,name:"Primer grado"},{id:2,name:"Primer grado"},{id:3,name:"Primer grado"}]}],categories=[{id:1,name:"Cuentos con valores"},{id:2,name:"Cuentos de princesas y príncipes"},{id:3,name:"Cuentos de animales"},{id:4,name:"Cuentos infantiles clásicos para niños"},{id:5,name:"Cuentos sobre tolerancia y bullying"},{id:6,name:"Cuentos infantiles de amistad"},{id:7,name:"Cuentos infantiles de dinosaurios"},{id:8,name:"Cuentos inventados por niños y otras colaboraciones"},{id:9,name:"Cuentos de piratas para niños"},{id:10,name:"Cuentos infantiles de amor y San Valentín"},{id:11,name:"Cuentos de sirenas para niños"},{id:12,name:"Cuentos de colaboraciones"},{id:13,name:"Cuentos de Navidad para niños"},{id:14,name:"Cuentos de brujas para niños"},{id:15,name:"Cuentos de miedo para niños"},{id:16,name:"Cuentos para dormir"},{id:17,name:"Cuentos de dragones para niños"},{id:18,name:"Cuentos de hadas para niños"},{id:19,name:"Microcuentos infantiles"}],getParams=function getParams(url){var params={},parser=document.createElement("a");parser.href=url;for(var query,vars=parser.search.substring(1).split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");params[pair[0]]=decodeURIComponent(pair[1])}return params};Vue.use(VueLazyload),Vue.component("tabs",{template:'\n            <div>\n                <div class="tabs">\n                  <div v-for="tab in tabs" class="tab col-sm-2" align="center" @click="hideFilters"> \n                    <a :href="tab.href" :target="tab.externalLink ? \'_blank\' : \'\'" @click="selectTab(tab)">\n                        <img :src="tab.img" :class="{ \'is-active\': tab.isActive }" width="100%" height="100px" :alt="tab.name" />\n                    </a>\n                  </div>\n                </div>\n\n                <div class="tabs-details">\n                    <slot></slot>\n                </div>\n            </div>\n        ',data:function data(){return{tabs:[]}},created:function created(){this.tabs=this.$children},methods:{selectTab:function selectTab(selectedTab){this.tabs.forEach((function(tab){tab.isActive=tab.name==selectedTab.name}))},hideFilters:function hideFilters(){this.$parent.showFilters=!1}}}),Vue.component("tab",{template:'\n\n            <div v-show="isActive"><slot></slot></div>\n\n        ',props:{name:{required:!0},img:{required:!0},selected:{default:!1},externalLink:{default:""}},data:function data(){return{isActive:!1}},computed:{href:function href(){return""!=this.externalLink?this.externalLink:"#"+this.name.toLowerCase().replace(/ /g,"-")}},mounted:function mounted(){this.isActive=this.selected}});var app=new Vue({el:"#app",data:{env:"prod",search:"",tabs:[],books:[],categories:[],audiobooks:[],pdfs:[],checkedCategories:[],url:window.location.origin,params:getParams(window.location.href),level:"",URLImages:"/assets/images/lecturas/",showFilteredItems:!0,categoryTitle:"Libros",showFilters:!1,page:1,perPage:2,pages:[],paginate:["books"],allbooks:[]},methods:{next:function next(){var currentPage=this.$refs.paginator[0].currentPage,lastPage=this.$refs.paginator[0].lastPage;this.debug("---------------------------------"),this.debug("Current page: "+this.$refs.paginator[0].currentPage),this.debug("Last page: "+this.$refs.paginator[0].lastPage),this.debug("Page item counts: "+this.$refs.paginator[0].pageItemsCount),this.debug("Items per page: "+this.$refs.paginator[0].per),currentPage<lastPage-1&&this.$refs.paginator[0].goToPage(currentPage+2)},prev:function prev(){var currentPage=this.$refs.paginator[0].currentPage,lastPage=this.$refs.paginator[0].lastPage;this.debug("---------------------------------"),this.debug("Current page: "+this.$refs.paginator[0].currentPage),this.debug("Last page: "+this.$refs.paginator[0].lastPage),this.debug("Page item counts: "+this.$refs.paginator[0].pageItemsCount),this.debug("Items per page: "+this.$refs.paginator[0].per),currentPage>0&&this.$refs.paginator[0].goToPage(currentPage--)},setOptions:function setOptions(e){this.checkedCategories=[e.target.value],this.filterbooksBy(e)},filterbooksBy:function filterbooksBy(category){if(this.search="",this.books=this.allbooks,this.debug("CategoryId: ["+category.target.value+"]"),"Todos"===category.target.value||!1===category.target.checked)return this.showAllBooks(),void this.categoryTitle;this.books=this.books.filter((function(book){return book.category==category.target.value})),this.categoryTitle=_.findWhere(this.categories,{id:parseInt(category.target.value)}).name},showAllBooks:function showAllBooks(){this.books=this.allbooks,this.showFilters=!1,this.checkedCategories=["Todos"],this.debug("Show all books.")},getTabs:function getTabs(){var _this=this;fetch(this.url+"/assets/scripts/lecturas/lecturas_"+this.level+".json").then((function(response){return response.json()})).then((function(json){_this.tabs=json;var lecturasPDF=_.findWhere(_this.tabs,{name:"Lecturas PDF"});void 0!==lecturasPDF&&(_this.pdfs=_.map(lecturasPDF.books,(function(books,key){return{name:key,books:books}})));var audioBooks=_.findWhere(_this.tabs,{name:"Audiolibros"});void 0!==audioBooks&&(_this.audiobooks=audioBooks.audiobooks);var lecturaUnicef=_.findWhere(_this.tabs,{name:"Lecturas Unicef"});void 0!==lecturaUnicef&&(_this.books=lecturaUnicef.books),_this.allbooks=_this.books}))},slug:function slug(title){if(void 0!==title){var slug="";slug=title.replace(/^\s+|\s+$/g,""),slug=slug.toLowerCase();for(var from="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",to="aaaaaeeeeeiiiiooooouuuunc------",i=0,l=from.length;i<l;i++)slug=slug.replace(new RegExp(from.charAt(i),"g"),to.charAt(i));return slug=slug.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_").replace("__","_").replace("___","_").replace(/\s*$/g,""),slug}},pathImage:function pathImage(imageTitle){return this.URLImages+level+"/"+this.slug(imageTitle,"_")+".png"},imageUrlAlt:function imageUrlAlt(event){event.target.src=this.URLImages+"default.svg",event.stopPropagation()},debug:function debug(message){"dev"===this.env&&console.log(message)},keypress:function keypress(){var lastPage=this.$refs.paginator[0].lastPage;this.debug("#books:["+this.$refs.paginator[0].list.length+"]"),this.$refs.paginator[0].list.length>0&&(this.showFilteredItems=!0,0==lastPage&&this.$refs.paginator[0].goToPage(0),0==this.$refs.paginator[0].list.length&&(this.showFilteredItems=!1)),this.$refs.paginator[0].list.length<=0&&(this.showFilteredItems=!1)},backspace:function backspace(){var lastPage=this.$refs.paginator[0].lastPage;this.$refs.paginator[0].list.length>0&&(this.showFilteredItems=!0,0==lastPage?this.$refs.paginator[0].goToPage(0):this.$refs.paginator[0].goToPage(1)),this.$refs.paginator[0].list.length<=0&&(this.showFilteredItems=!1)}},created:function created(){var param=this.params.nivel;this.categories=categories,void 0!==param&&""!=param&&(this.level=param,this.debug("["+this.level+"]"),this.getTabs())},computed:{searchBooks:function searchBooks(){var _this2=this,books;return this.books.filter((function(book){return _this2.slug(book.title).includes(_this2.slug(_this2.search))}))},breadcrumbText:function breadcrumbText(){return"Educación "+this.level},breadcrumbUrl:function breadcrumbUrl(){return"especial"==this.level||"adultos"==this.level?"../niveles/e"+this.level:"../niveles/"+this.level}}});